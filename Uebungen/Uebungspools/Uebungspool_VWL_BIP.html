<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>VWL √úbungspool: BIP | EWR GYM2</title>
<style>
@import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400&family=DM+Mono:wght@400;500&display=swap');
:root{
--c-bg:#f0f2f5;--c-surface:#fff;--c-primary:#f89907;--c-primary-light:#ffb74d;
--c-accent:#e8a838;--c-accent-light:#fef3c7;--c-success:#16a34a;--c-success-bg:#f0fdf4;
--c-error:#dc2626;--c-error-bg:#fef2f2;--c-info:#2563eb;--c-info-bg:#eff6ff;
--c-text:#1e293b;--c-text-soft:#64748b;--c-border:#e2e8f0;--radius:10px;
--shadow-sm:0 1px 3px rgba(0,0,0,.06);--shadow-md:0 4px 12px rgba(0,0,0,.08);
}
*{margin:0;padding:0;box-sizing:border-box}
body{font-family:'DM Sans',system-ui,sans-serif;background:var(--c-bg);color:var(--c-text);line-height:1.6;min-height:100vh}
.app-header{background:linear-gradient(135deg,var(--c-primary),var(--c-primary-light));color:#fff;padding:20px 24px;position:sticky;top:0;z-index:100;box-shadow:0 2px 12px rgba(0,0,0,.15)}
.app-header h1{font-size:1.25rem;font-weight:700;letter-spacing:-.02em}
.app-header .meta{font-size:.8rem;opacity:.75;margin-top:2px}
.container{max-width:720px;margin:0 auto;padding:20px 16px 100px}
.screen{display:none}.screen.active{display:block}
.card{background:var(--c-surface);border-radius:var(--radius);padding:24px;margin-bottom:16px;box-shadow:var(--shadow-sm);border:1px solid var(--c-border)}
.card h2{font-size:1.05rem;font-weight:700;margin-bottom:14px;color:var(--c-text)}
.mode-cards{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:8px}
.mode-card{border:2px solid var(--c-border);border-radius:var(--radius);padding:16px;cursor:pointer;text-align:center;transition:.2s}
.mode-card:hover{border-color:var(--c-primary-light);background:#f8fafc}
.mode-card.active{border-color:var(--c-primary);background:var(--c-info-bg)}
.mode-card .mode-icon{font-size:1.8rem;margin-bottom:6px}
.mode-card .mode-title{font-weight:700;font-size:.95rem}
.mode-card .mode-desc{font-size:.78rem;color:var(--c-text-soft);margin-top:4px}
.chips{display:flex;flex-wrap:wrap;gap:8px;margin-bottom:12px}
.chip{display:inline-flex;align-items:center;padding:6px 14px;border-radius:20px;font-size:.82rem;font-weight:500;cursor:pointer;border:2px solid var(--c-border);background:#fff;transition:.15s;user-select:none}
.chip:hover{border-color:var(--c-primary-light)}
.chip.active{background:var(--c-primary);color:#fff;border-color:var(--c-primary)}
.filter-count{font-family:'DM Mono',monospace;font-size:.95rem;font-weight:600;color:var(--c-text);margin-top:8px}
.btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:12px 24px;border-radius:var(--radius);font-family:inherit;font-size:.95rem;font-weight:600;cursor:pointer;border:none;transition:.2s}
.btn-primary{background:var(--c-primary);color:#fff}.btn-primary:hover{background:var(--c-primary-light)}
.btn-primary:disabled{opacity:.4;cursor:not-allowed}
.btn-accent{background:var(--c-accent);color:#fff}.btn-accent:hover{filter:brightness(1.05)}
.btn-outline{background:transparent;border:2px solid var(--c-border);color:var(--c-text)}.btn-outline:hover{border-color:var(--c-primary);color:var(--c-primary)}
.btn-block{width:100%;justify-content:center}
.progress-bar-wrap{background:var(--c-border);border-radius:20px;height:8px;margin:12px 0;overflow:hidden}
.progress-bar-fill{height:100%;background:var(--c-accent);border-radius:20px;transition:width .4s ease}
.quiz-meta{display:flex;justify-content:space-between;align-items:center;font-size:.85rem;color:var(--c-text-soft);margin-bottom:4px}
.quiz-meta .score{font-family:'DM Mono',monospace;font-weight:600;color:var(--c-text)}
.q-badges{display:flex;gap:6px;flex-wrap:wrap;margin-bottom:12px}
.badge{font-size:.7rem;font-weight:600;padding:3px 10px;border-radius:12px;text-transform:uppercase;letter-spacing:.03em}
.badge-topic{background:var(--c-info-bg);color:var(--c-info)}
.badge-diff1{background:#f0fdf4;color:#16a34a}.badge-diff2{background:#fef3c7;color:#b45309}.badge-diff3{background:#fef2f2;color:#dc2626}
.badge-tax{background:#f3e8ff;color:#7c3aed}
.badge-type{background:#f1f5f9;color:#475569}
.q-text{font-size:1rem;font-weight:500;margin-bottom:18px;line-height:1.65}
.mc-options{display:flex;flex-direction:column;gap:10px}
.mc-opt{display:flex;align-items:flex-start;gap:12px;padding:14px 16px;border:2px solid var(--c-border);border-radius:var(--radius);cursor:pointer;transition:.15s;background:#fff}
.mc-opt:hover{border-color:var(--c-primary-light);background:#f8fafc}
.mc-opt.selected{border-color:var(--c-info);background:var(--c-info-bg)}
.mc-opt.correct{border-color:var(--c-success);background:var(--c-success-bg)}
.mc-opt.wrong{border-color:var(--c-error);background:var(--c-error-bg)}
.mc-opt .opt-letter{font-family:'DM Mono',monospace;font-weight:700;font-size:.85rem;min-width:24px;height:24px;display:flex;align-items:center;justify-content:center;border-radius:50%;background:var(--c-border);color:var(--c-text-soft);flex-shrink:0}
.mc-opt.selected .opt-letter{background:var(--c-info);color:#fff}
.mc-opt.correct .opt-letter{background:var(--c-success);color:#fff}
.mc-opt.wrong .opt-letter{background:var(--c-error);color:#fff}
.mc-opt .opt-text{font-size:.92rem;line-height:1.5}
.tf-btns{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.tf-btn{padding:16px;border:2px solid var(--c-border);border-radius:var(--radius);text-align:center;font-weight:600;font-size:1rem;cursor:pointer;transition:.15s;background:#fff}
.tf-btn:hover{border-color:var(--c-primary-light)}.tf-btn.selected{border-color:var(--c-info);background:var(--c-info-bg)}
.tf-btn.correct{border-color:var(--c-success);background:var(--c-success-bg)}
.tf-btn.wrong{border-color:var(--c-error);background:var(--c-error-bg)}
.fill-input{border:none;border-bottom:2px solid var(--c-primary);background:var(--c-info-bg);padding:4px 8px;font-family:inherit;font-size:.92rem;font-weight:500;min-width:120px;outline:none;border-radius:4px 4px 0 0;transition:.2s}
.fill-input:focus{border-color:var(--c-accent);background:var(--c-accent-light)}
.fill-input.correct{border-color:var(--c-success);background:var(--c-success-bg)}
.fill-input.wrong{border-color:var(--c-error);background:var(--c-error-bg)}
.calc-rows{display:flex;flex-direction:column;gap:10px}
.calc-row{display:flex;align-items:center;gap:10px;flex-wrap:wrap}
.calc-row label{font-size:.9rem;flex:1;min-width:150px}
.calc-row input{width:100px;padding:8px 10px;border:2px solid var(--c-border);border-radius:6px;font-family:'DM Mono',monospace;font-size:.92rem;text-align:right;outline:none}
.calc-row input:focus{border-color:var(--c-primary)}
.calc-row .unit{font-size:.85rem;color:var(--c-text-soft);min-width:30px}
.calc-row input.correct{border-color:var(--c-success);background:var(--c-success-bg)}
.calc-row input.wrong{border-color:var(--c-error);background:var(--c-error-bg)}
.open-answer{width:100%;min-height:80px;padding:12px;border:2px solid var(--c-border);border-radius:var(--radius);font-family:inherit;font-size:.92rem;line-height:1.5;resize:vertical;outline:none;background:#fff}
.open-answer:focus{border-color:var(--c-primary)}
.open-sample{margin-top:12px;padding:14px;border-radius:var(--radius);background:var(--c-info-bg);border-left:4px solid var(--c-info);font-size:.9rem;line-height:1.6;display:none}
.open-sample.show{display:block}
.open-sample-title{font-weight:700;color:var(--c-info);margin-bottom:4px}
.open-self{display:flex;gap:10px;margin-top:12px;display:none}
.open-self.show{display:flex}
.open-self .btn{flex:1}
.sort-pool{display:flex;flex-wrap:wrap;gap:8px;min-height:48px;padding:12px;background:var(--c-bg);border-radius:var(--radius);margin-bottom:12px}
.sort-item{padding:8px 14px;border-radius:8px;font-size:.85rem;font-weight:500;cursor:pointer;transition:.2s;border:2px solid var(--c-border);background:#fff;user-select:none}
.sort-item:hover{border-color:var(--c-primary-light)}.sort-item.picked{border-color:var(--c-primary);background:var(--c-primary);color:#fff;box-shadow:0 0 0 3px color-mix(in srgb,var(--c-primary) 25%,transparent)}
.sort-cats{display:grid;gap:12px;margin-top:8px}
.sort-cat{border:2px dashed var(--c-border);border-radius:var(--radius);padding:12px;min-height:60px;transition:.2s}
.sort-cat:hover{border-color:var(--c-primary-light)}
.sort-cat.active{border-color:var(--c-primary);background:color-mix(in srgb,var(--c-primary) 8%,transparent)}
.sort-cat-title{font-weight:700;font-size:.85rem;color:var(--c-text);margin-bottom:8px}
.sort-cat-items{display:flex;flex-wrap:wrap;gap:6px}
.sort-cat-item{padding:6px 12px;border-radius:6px;font-size:.82rem;font-weight:500;cursor:pointer;background:var(--c-primary);color:#fff;transition:.15s}
.sort-cat-item:hover{opacity:.85}
.sort-cat-item.correct-item{background:var(--c-success)}.sort-cat-item.wrong-item{background:var(--c-error)}
.feedback{margin-top:16px;padding:16px;border-radius:var(--radius);font-size:.9rem;line-height:1.6;display:none}
.feedback.show{display:block}
.feedback.correct{background:var(--c-success-bg);border-left:4px solid var(--c-success)}
.feedback.wrong{background:var(--c-error-bg);border-left:4px solid var(--c-error)}
.feedback-title{font-weight:700;margin-bottom:4px}
.quiz-actions{display:flex;gap:10px;margin-top:18px;flex-wrap:wrap}
.result-score{text-align:center;padding:24px;font-family:'DM Mono',monospace}
.result-score .big{font-size:2.8rem;font-weight:700;color:var(--c-text)}
.result-score .pct{font-size:1.4rem;color:var(--c-text-soft)}
.topic-results{display:flex;flex-direction:column;gap:8px;margin-top:12px}
.topic-row{display:flex;align-items:center;gap:10px;padding:10px 14px;border-radius:8px;background:var(--c-bg)}
.topic-row .topic-name{flex:1;font-size:.88rem;font-weight:500}
.topic-row .topic-score{font-family:'DM Mono',monospace;font-weight:600;font-size:.85rem}
.topic-row .topic-bar{width:60px;height:6px;background:var(--c-border);border-radius:3px;overflow:hidden}
.topic-row .topic-bar-fill{height:100%;border-radius:3px}
.tg{background:var(--c-success)}.ty{background:var(--c-accent)}.tr{background:var(--c-error)}
.wrong-list{margin-top:12px}
.wrong-item{padding:14px;border-radius:var(--radius);margin-bottom:10px;background:var(--c-bg);border-left:3px solid var(--c-error)}
.wrong-item .wq{font-weight:600;font-size:.9rem;margin-bottom:4px}
.wrong-item .wa{font-size:.85rem;color:var(--c-text-soft);line-height:1.5}
@media(prefers-color-scheme:dark){
:root{
--c-bg:#0f1117;--c-surface:#1a1d27;--c-primary:#f89907;--c-primary-light:#ffb74d;
--c-accent:#e8a838;--c-accent-light:#3d2e10;--c-success:#22c55e;--c-success-bg:#0a2618;
--c-error:#ef4444;--c-error-bg:#2a0f0f;--c-info:#60a5fa;--c-info-bg:#0f1d3a;
--c-text:#e2e8f0;--c-text-soft:#94a3b8;--c-border:#2d3348;
--shadow-sm:0 1px 3px rgba(0,0,0,.3);--shadow-md:0 4px 12px rgba(0,0,0,.4);
}
.app-header{box-shadow:0 2px 12px rgba(0,0,0,.4)}
.mc-opt,.tf-btn,.sort-item{background:var(--c-surface)}
.mc-opt:hover,.mode-card:hover{background:#1f2333}
.mc-opt .opt-letter{background:var(--c-border);color:var(--c-text-soft)}
.chip{background:var(--c-surface)}
.badge-diff1{background:#0a2618;color:#22c55e}.badge-diff2{background:#3d2e10;color:#e8a838}.badge-diff3{background:#2a0f0f;color:#ef4444}
.badge-tax{background:#1a0f2e;color:#a78bfa}
.badge-type{background:#1a1d27;color:#94a3b8}
.topic-row{background:var(--c-surface)}
.wrong-item{background:var(--c-surface)}
.calc-row input{background:var(--c-surface);color:var(--c-text);border-color:var(--c-border)}
.open-answer{background:var(--c-surface);color:var(--c-text);border-color:var(--c-border)}
}
@media print{.app-header,.quiz-actions,.btn,#startScreen{display:none!important}.screen{display:block!important}.card{break-inside:avoid;box-shadow:none;border:1px solid #ccc}}
@media(max-width:500px){.mode-cards{grid-template-columns:1fr}.container{padding:12px 10px 80px}.card{padding:18px}.tf-btns{grid-template-columns:1fr}}
</style>
</head>
<body>
<header class="app-header">
<h1>√úbungspool: Bruttoinlandprodukt (BIP)</h1>
<div class="meta">EWR GYM2 ¬∑ Gymnasium Hofwil ¬∑ Individuell √ºben</div>
</header>
<div class="container">
<div id="startScreen" class="screen active">
<div class="card">
<h2>üìã Modus w√§hlen</h2>
<div class="mode-cards">
<div class="mode-card" data-mode="focus" onclick="setMode('focus')">
<div class="mode-icon">üéØ</div>
<div class="mode-title">Fokus</div>
<div class="mode-desc">Gezielt ein Thema √ºben, nach Schwierigkeit sortiert</div>
</div>
<div class="mode-card" data-mode="mix" onclick="setMode('mix')">
<div class="mode-icon">üîÄ</div>
<div class="mode-title">Mix</div>
<div class="mode-desc">Zuf√§llige Auswahl quer durch alle Themen</div>
</div>
</div>
</div>
<div class="card">
<h2>üìö Unterthema</h2>
<div class="chips" id="topicChips"></div>
</div>
<div class="card">
<h2>üìä Schwierigkeit</h2>
<div class="chips" id="diffChips"></div>
</div>
<div class="card">
<h2>‚úèÔ∏è Fragetyp</h2>
<div class="chips" id="typeChips"></div>
</div>
<div class="card" style="text-align:center">
<div class="filter-count" id="filterCount">0 Aufgaben verf√ºgbar</div>
<button class="btn btn-primary btn-block" id="startBtn" style="margin-top:14px" onclick="startQuiz()" disabled>√úbung starten</button>
</div>
</div>
<div id="quizScreen" class="screen">
<div class="card">
<div class="quiz-meta">
<span id="qProgress">1 / 10</span>
<span class="score" id="qScore">0 Punkte</span>
</div>
<div class="progress-bar-wrap"><div class="progress-bar-fill" id="progressBar" style="width:0%"></div></div>
</div>
<div class="card" id="questionCard"></div>
<div class="quiz-actions" id="quizActions">
<button class="btn btn-accent" id="nextBtn" onclick="nextQuestion()" style="display:none">N√§chste Aufgabe ‚Üí</button>
<button class="btn btn-outline" onclick="endQuiz()">√úbung beenden</button>
</div>
</div>
<div id="resultScreen" class="screen">
<div class="card">
<div class="result-score">
<div class="big" id="resPts">0/0</div>
<div class="pct" id="resPct">0%</div>
</div>
</div>
<div class="card"><h2>üìä Nach Unterthema</h2><div id="topicResults" class="topic-results"></div></div>
<div class="card" id="wrongCard"><h2>‚ùå Zum Repetieren</h2><div id="wrongList" class="wrong-list"></div></div>
<div class="card" style="text-align:center">
<button class="btn btn-primary" onclick="exportResults()" style="margin-right:10px">üìÑ Als PDF speichern</button>
<button class="btn btn-outline" onclick="resetApp()">Neue √úbung starten</button>
</div>
</div>
</div>
<script>
const TOPICS={
  definition:{label:"Definition & Grundbegriffe",short:"Definition"},
  messprobleme:{label:"Was das BIP (nicht) misst",short:"Messprobleme"},
  dreiseiten:{label:"Drei Seiten des BIP",short:"3 Seiten"},
  nomreal:{label:"Nominales & Reales BIP",short:"Nom./Real"},
  kreislauf:{label:"Wirtschaftskreislauf",short:"Kreislauf"},
  verteilung:{label:"Verteilung & Ungleichheit",short:"Verteilung"},
  wachstum:{label:"Wachstum & Nachhaltigkeit",short:"Wachstum"}
};
const DIFF_LABELS={1:"\u2b50 Einfach",2:"\u2b50\u2b50 Mittel",3:"\u2b50\u2b50\u2b50 Schwer"};
const TYPE_LABELS={mc:"\ud83d\udcdd Multiple Choice",tf:"\u2713\u2717 Richtig/Falsch",fill:"\ud83d\udcd6 L\u00fcckentext",calc:"\ud83d\udd22 Berechnung",sort:"\ud83d\udd00 Zuordnung",open:"\u270f\ufe0f Offene Frage"};
const QUESTIONS=[
// ‚îÄ‚îÄ‚îÄ‚îÄ DEFINITION & GRUNDBEGRIFFE (d01‚Äìd10) ‚îÄ‚îÄ‚îÄ‚îÄ
{id:"d01",topic:"definition",type:"mc",diff:1,tax:"K1",
 q:"Was misst das Bruttoinlandprodukt (BIP)?",
 options:[{v:"A",t:"Den Marktwert aller in einem Land w√§hrend eines Jahres hergestellten Endprodukte."},{v:"B",t:"Die Summe aller in einem Land produzierten G√ºter inklusive Vorleistungen."},{v:"C",t:"Den Wert aller Exporte eines Landes."},{v:"D",t:"Das Gesamtverm√∂gen aller Einwohner eines Landes."}],
 correct:"A",explain:"Das BIP entspricht dem Marktwert aller Endprodukte (Waren und Dienstleistungen), die in einem Land innerhalb eines Jahres hergestellt werden. Vorleistungen werden abgezogen, um Doppelz√§hlungen zu vermeiden."},

{id:"d02",topic:"definition",type:"tf",diff:1,tax:"K1",
 q:"Vorleistungen werden beim BIP abgezogen, um Doppelz√§hlungen zu vermeiden.",
 correct:true,explain:"Korrekt. Das BIP misst nur die Wertsch√∂pfung jeder Produktionsstufe. W√ºrde man den gesamten Produktionswert z√§hlen, w√§re das BIP k√ºnstlich aufgebl√§ht."},

{id:"d03",topic:"definition",type:"fill",diff:1,tax:"K1",
 q:"Das BIP misst die {0} einer Volkswirtschaft. Dabei werden nur {1} ber√ºcksichtigt, nicht Vorleistungen, um {2} zu vermeiden.",
 blanks:[
   {answer:"Wertsch√∂pfung",alts:["Wertschoepfung"]},
   {answer:"Endprodukte",alts:["Endg√ºter"]},
   {answer:"Doppelz√§hlungen",alts:["Doppelzaehlungen"]}
 ],
 explain:"BIP = Marktwert aller Endprodukte. Endprodukte sind G√ºter, die nicht weiterverarbeitet, sondern direkt konsumiert oder investiert werden."},

{id:"d04",topic:"definition",type:"mc",diff:1,tax:"K1",
 q:"Welche vier Produktionsfaktoren unterscheidet man in der VWL?",
 options:[{v:"A",t:"Arbeit, Boden (nat√ºrliche Ressourcen), Kapital und Wissen"},{v:"B",t:"Geld, Maschinen, Rohstoffe und Energie"},{v:"C",t:"Konsum, Investitionen, Staat und Exporte"},{v:"D",t:"L√∂hne, Zinsen, Mieten und Gewinne"}],
 correct:"A",explain:"Die vier Produktionsfaktoren: Arbeit (k√∂rperliche/geistige T√§tigkeit), Boden (Rohstoffe, Standort, Energie), Kapital (Sach-/Geldkapital, Maschinen), Wissen (Humankapital, Know-how, Patente)."},

{id:"d05",topic:"definition",type:"open",diff:2,tax:"K2",
 q:"Erkl√§ren Sie in eigenen Worten, warum Vorleistungen bei der BIP-Berechnung abgezogen werden. Verwenden Sie ein Beispiel.",
 sample:"Vorleistungen werden abgezogen, um Doppelz√§hlungen zu vermeiden. Beispiel: Bauer verkauft Mehl f√ºr CHF 30 an B√§cker, B√§cker verkauft Brot f√ºr CHF 100 an H√§ndler, H√§ndler verkauft es f√ºr CHF 120. Ohne Abzug: 30+100+120 = CHF 250. Wertsch√∂pfung aber nur: 30+70+20 = CHF 120.",
 explain:"Das BIP misst die Wertsch√∂pfung, nicht den Umsatz. Im Brot-Beispiel: Bauer (30) + B√§cker (100‚Äì30=70) + H√§ndler (120‚Äì100=20) = BIP von 120 = Endproduktpreis."},

{id:"d06",topic:"definition",type:"calc",diff:2,tax:"K3",
 q:"Drei Produzenten: Bauer verkauft Weizen f√ºr CHF 40 an M√ºller. M√ºller verkauft Mehl f√ºr CHF 90 an B√§cker. B√§cker verkauft Brot f√ºr CHF 150 an Konsumenten. Berechnen Sie:",
 rows:[
   {label:"BIP der Volkswirtschaft",answer:150,tolerance:0,unit:"CHF"},
   {label:"Wertsch√∂pfung des B√§ckers",answer:60,tolerance:0,unit:"CHF"}
 ],
 explain:"BIP = Endproduktpreis = CHF 150. Wertsch√∂pfung Bauer: 40, M√ºller: 90‚Äì40=50, B√§cker: 150‚Äì90=60. Summe: 40+50+60 = 150 = BIP."},

{id:"d07",topic:"definition",type:"tf",diff:1,tax:"K1",
 q:"Die Wertsch√∂pfung eines Unternehmens berechnet sich als Produktionswert minus Vorleistungen.",
 correct:true,explain:"Richtig. Wertsch√∂pfung = Verkaufspreis ‚Äì zugekaufte Vorleistungen = der neu geschaffene Wert auf dieser Produktionsstufe."},

{id:"d08",topic:"definition",type:"sort",diff:1,tax:"K2",
 q:"Ordnen Sie die Begriffe den korrekten Produktionsfaktoren zu.",
 categories:["Arbeit","Boden / Nat√ºrl. Ressourcen","Kapital","Wissen"],
 items:[
   {t:"Lohn einer Verk√§uferin",cat:0},{t:"Rohstoffe aus der Erde",cat:1},
   {t:"Maschinen und Anlagen",cat:2},{t:"Patente und Lizenzen",cat:3},
   {t:"Standort / Grundst√ºck",cat:1},{t:"Ausbildung / Know-how",cat:3},
   {t:"Geldkapital f√ºr Investitionen",cat:2},{t:"K√∂rperliche Arbeitskraft",cat:0}
 ],
 explain:"Arbeit = k√∂rperliche/geistige T√§tigkeit. Boden = Standort, Rohstoffe. Kapital = Sach- und Geldkapital. Wissen = Humankapital, Patente, Know-how."},

{id:"d09",topic:"definition",type:"mc",diff:2,tax:"K2",
 q:"Was ist der Unterschied zwischen Wohlstand und Wohlfahrt?",
 options:[{v:"A",t:"Wohlstand = materielle G√ºterversorgung (BIP pro Kopf), Wohlfahrt = zus√§tzlich Gesundheit, Bildung, Umwelt etc."},{v:"B",t:"Wohlstand und Wohlfahrt sind Synonyme f√ºr das BIP."},{v:"C",t:"Wohlfahrt misst nur die staatlichen Sozialleistungen."},{v:"D",t:"Wohlstand ber√ºcksichtigt die Umwelt, Wohlfahrt nicht."}],
 correct:"A",explain:"Wohlstand = materieller Lebensstandard (BIP pro Kopf). Wohlfahrt = umfassenderes Wohlergehen inkl. Gesundheit, Bildung, Freizeit, Umwelt, soziale Sicherheit. Das BIP misst Wohlstand, aber nicht Wohlfahrt."},

{id:"d10",topic:"definition",type:"tf",diff:2,tax:"K2",
 q:"Das BIP pro Kopf ist ein geeignetes Mass f√ºr die Lebensqualit√§t einer Bev√∂lkerung.",
 correct:false,explain:"Falsch. Das BIP pro Kopf misst den materiellen Wohlstand, nicht die Lebensqualit√§t. Es ignoriert Umweltsch√§den, Einkommensverteilung, Gesundheit, Bildung und Freizeit. Mehr Autounf√§lle erh√∂hen z.B. das BIP, senken aber die Lebensqualit√§t."},

// ‚îÄ‚îÄ‚îÄ‚îÄ MESSPROBLEME (m01‚Äìm10) ‚îÄ‚îÄ‚îÄ‚îÄ
{id:"m01",topic:"messprobleme",type:"mc",diff:1,tax:"K1",
 q:"Welche Leistung wird im BIP NICHT erfasst?",
 options:[{v:"A",t:"Hausarbeit und Eigenleistungen (z.B. selber kochen)"},{v:"B",t:"Die Produktion eines Automobilherstellers"},{v:"C",t:"Dienstleistungen eines Coiffeurs"},{v:"D",t:"Staatliche Leistungen wie Polizei und Schulen"}],
 correct:"A",explain:"Hausarbeit, Eigenleistungen und DIY werden nicht erfasst, da kein Marktpreis existiert. Wenn eine Familie die Kinderbetreuung in eine Krippe auslagert, steigt das BIP ‚Äì obwohl die Leistung gleich bleibt."},

{id:"m02",topic:"messprobleme",type:"tf",diff:1,tax:"K2",
 q:"Wenn ein Jahrhunderthochwasser Milliardensch√§den verursacht, sinkt das BIP.",
 correct:false,explain:"Falsch ‚Äì das BIP steigt sogar! Die Wiederaufbauarbeiten werden als Wertsch√∂pfung erfasst. Die Zerst√∂rung selbst wird nicht als negative Position verbucht. Das zeigt eine wichtige Schw√§che des BIP."},

{id:"m03",topic:"messprobleme",type:"mc",diff:2,tax:"K2",
 q:"Warum ist die Bewertung staatlicher Leistungen im BIP problematisch?",
 options:[{v:"A",t:"Staatliche Leistungen werden zu ihren Kosten bewertet ‚Äì eine Lohnerh√∂hung f√ºr Beamte erh√∂ht das BIP, ohne dass die Leistung besser wird."},{v:"B",t:"Staatliche Leistungen werden gar nicht erfasst."},{v:"C",t:"Der Staat produziert keine G√ºter."},{v:"D",t:"Staatliche Leistungen werden doppelt gez√§hlt."}],
 correct:"A",explain:"Da Staatsleistungen nicht am Markt verkauft werden, fehlt ein Marktpreis. Sie werden zu ihren Kosten (v.a. L√∂hne) bewertet. Eine Lohnerh√∂hung erh√∂ht das BIP, ohne Leistungsverbesserung."},

{id:"m04",topic:"messprobleme",type:"tf",diff:2,tax:"K2",
 q:"Seit 2014 werden in der Schweiz auch Sch√§tzungen zu Drogenhandel und Prostitution ins BIP eingerechnet.",
 correct:true,explain:"Richtig. Seit September 2014 werden gem√§ss einer europ√§ischen Richtlinie illegale Aktivit√§ten wie Drogenhandel und Prostitution gesch√§tzt und im BIP erfasst (Statistik-Revision)."},

{id:"m05",topic:"messprobleme",type:"sort",diff:2,tax:"K2",
 q:"Ordnen Sie zu: Wird die Aktivit√§t im BIP erfasst oder nicht?",
 categories:["Im BIP erfasst","NICHT im BIP erfasst"],
 items:[
   {t:"Putzfrau offiziell angestellt",cat:0},{t:"Selber die Wohnung putzen",cat:1},
   {t:"Kind in Krippe betreuen lassen",cat:0},{t:"Kind zu Hause selber betreuen",cat:1},
   {t:"Schwarzarbeit (nicht angemeldet)",cat:1},{t:"Kalbsbraten im Restaurant",cat:0},
   {t:"Kalbsbraten selber kochen",cat:1},{t:"Reparatur durch eine Garage",cat:0}
 ],
 explain:"Die VGR erfasst nur monet√§re Markttransaktionen. Eigenleistungen und Schwarzarbeit fehlen. Dieselbe Leistung wird erfasst, sobald sie √ºber den Markt abgewickelt wird."},

{id:"m06",topic:"messprobleme",type:"open",diff:3,tax:"K4",
 q:"Ein Nationalrat besch√§ftigte eine Putzfrau schwarz. Nachdem der Fall publik wurde, stieg die Zahl der offiziellen Anmeldungen von Haushaltshilfen stark. Analysieren Sie die Auswirkung auf das BIP.",
 sample:"Das BIP steigt, obwohl sich die tats√§chliche Wirtschaftsleistung nicht ver√§ndert. Die Putzarbeiten wurden vorher als Schwarzarbeit geleistet und nicht erfasst. Durch die offizielle Anmeldung werden dieselben Leistungen nun registriert ‚Äì das BIP bildet einen h√∂heren Wert ab, nur weil bisher nicht erfasste Leistungen sichtbar werden.",
 explain:"Schwarzarbeit (gesch√§tzt ca. 7% des BIP in der Schweiz) wird nicht vollst√§ndig erfasst. Eine Legalisierung erh√∂ht das gemessene BIP, ohne die tats√§chliche Wirtschaftsleistung zu ver√§ndern."},

{id:"m07",topic:"messprobleme",type:"mc",diff:2,tax:"K2",
 q:"Welche Herausforderung stellt die Digitalisierung f√ºr die BIP-Messung dar?",
 options:[{v:"A",t:"Digitale Werte wie Daten und kostenlose Online-Dienste haben keinen klassischen Marktpreis."},{v:"B",t:"Digitale G√ºter sind zu g√ºnstig."},{v:"C",t:"Die Digitalisierung hat keinen Einfluss auf das BIP."},{v:"D",t:"Digitale Produkte werden doppelt gez√§hlt."}],
 correct:"A",explain:"Kostenlose Online-Dienste (soziale Medien, Wikipedia) generieren Nutzen, erscheinen aber nicht im BIP. Zudem l√§sst sich die Wertsch√∂pfung oft nicht klar einem Land zuordnen."},

{id:"m08",topic:"messprobleme",type:"tf",diff:1,tax:"K1",
 q:"Umweltsch√§den durch die Produktion werden im BIP als negative Position verbucht.",
 correct:false,explain:"Falsch. Umweltsch√§den werden nicht abgezogen. Die Beseitigung von Umweltsch√§den wird sogar als positive Wertsch√∂pfung gez√§hlt. Das BIP erfasst externe Kosten nicht."},

{id:"m09",topic:"messprobleme",type:"open",diff:3,tax:"K5",
 q:"Beurteilen Sie: ¬´Das BIP ist trotz aller Schw√§chen das beste Mass f√ºr den Wohlstand.¬ª",
 sample:"Pro: International standardisiert, objektiv messbar, erm√∂glicht Vergleiche. Contra: Ignoriert Eigenleistungen, Schwarzarbeit, Umweltsch√§den, Verteilung, Lebensqualit√§t. Alternative Indikatoren (HDI, Happy Planet Index) versuchen L√ºcken zu schliessen, sind aber weniger standardisiert. Fazit: N√ºtzlicher, aber unvollst√§ndiger Indikator ‚Äì sollte mit anderen Kennzahlen erg√§nzt werden.",
 explain:"Diese K5-Frage erfordert eine differenzierte Beurteilung mit Pro und Contra. Das BIP hat klare St√§rken (Vergleichbarkeit) und Schw√§chen (fehlende Erfassung vieler wohlstandsrelevanter Aspekte)."},

{id:"m10",topic:"messprobleme",type:"fill",diff:1,tax:"K1",
 q:"Die VGR erfasst nur {0} Fl√ºsse. Deshalb fehlen im BIP z.B. {1} und Eigenleistungen. Zudem werden {2} nicht als Kosten abgezogen.",
 blanks:[
   {answer:"monet√§re",alts:["monetaere","geldm√§ssige"]},
   {answer:"Schwarzarbeit",alts:["Schattenwirtschaft"]},
   {answer:"Umweltsch√§den",alts:["Umweltschaeden","externe Kosten"]}
 ],
 explain:"Drei Hauptkritikpunkte: (1) Nicht erfasste Leistungen (Eigenarbeit, Schwarzarbeit), (2) Nicht erfasste Sch√§den (Umwelt), (3) Problematische Bewertung (Staatsleistungen zu Kosten)."},

// ‚îÄ‚îÄ‚îÄ‚îÄ DREI SEITEN DES BIP (s01‚Äìs07) ‚îÄ‚îÄ‚îÄ‚îÄ
{id:"s01",topic:"dreiseiten",type:"mc",diff:1,tax:"K1",
 q:"Das BIP kann auf drei Arten berechnet werden. Welche?",
 options:[{v:"A",t:"Produktionsansatz, Einkommensansatz und Verwendungsansatz"},{v:"B",t:"Konsumansatz, Sparansatz und Investitionsansatz"},{v:"C",t:"Exportansatz, Importansatz und Binnenmarktansatz"},{v:"D",t:"Brutto-, Netto- und Realansatz"}],
 correct:"A",explain:"(1) Produktionsansatz = Summe aller Wertsch√∂pfungen, (2) Einkommensansatz = Summe aller Einkommen, (3) Verwendungsansatz = C + I + G + NX. Alle drei ergeben denselben Wert."},

{id:"s02",topic:"dreiseiten",type:"fill",diff:1,tax:"K1",
 q:"Beim {0} wird das BIP als Summe aller Wertsch√∂pfungen berechnet. Beim {1} z√§hlt man alle Einkommen zusammen. Beim {2} betrachtet man, wof√ºr die G√ºter verwendet werden.",
 blanks:[
   {answer:"Produktionsansatz",alts:["Produktions-Ansatz"]},
   {answer:"Einkommensansatz",alts:["Einkommens-Ansatz"]},
   {answer:"Verwendungsansatz",alts:["Verwendungs-Ansatz"]}
 ],
 explain:"Die drei Ans√§tze sind gleichwertige Methoden. Produktionsansatz: Wertsch√∂pfung aller Unternehmen. Einkommensansatz: Alle Faktoreinkommen. Verwendungsansatz: C + I + G + NX."},

{id:"s03",topic:"dreiseiten",type:"mc",diff:2,tax:"K2",
 q:"BIP = C + I + G + (X ‚Äì M). Was bedeuten die Variablen?",
 options:[{v:"A",t:"C = privater Konsum, I = Investitionen, G = Staatsausgaben, X = Exporte, M = Importe"},{v:"B",t:"C = Kapital, I = Importe, G = Gewinne, X = Exporte, M = Mieten"},{v:"C",t:"C = Konsum, I = Zinsen, G = Geld, X = Exporte, M = Maschinen"},{v:"D",t:"C = Kosten, I = Investitionen, G = Grundst√ºcke, X = Extra, M = Mehrwert"}],
 correct:"A",explain:"BIP nach Verwendungsansatz: C = privater Konsum (Haushalte), I = Bruttoinvestitionen, G = Staatskonsum (Government), X‚ÄìM = Nettoexporte. In der Schweiz macht der private Konsum den gr√∂ssten Anteil aus."},

{id:"s04",topic:"dreiseiten",type:"sort",diff:2,tax:"K2",
 q:"Ordnen Sie die Beispiele dem korrekten BIP-Berechnungsansatz zu.",
 categories:["Produktionsansatz","Einkommensansatz","Verwendungsansatz"],
 items:[
   {t:"Summe aller L√∂hne und Gewinne",cat:1},{t:"Wertsch√∂pfung aller Unternehmen",cat:0},
   {t:"C + I + G + NX",cat:2},{t:"Produktionswert minus Vorleistungen",cat:0},
   {t:"Export von Uhren ins Ausland",cat:2},{t:"Lohn einer Lehrerin",cat:1}
 ],
 explain:"Produktionsansatz: Wertsch√∂pfung. Einkommensansatz: Alle Einkommen. Verwendungsansatz: Wof√ºr das BIP ausgegeben wird (C+I+G+NX). Uhrenexport = Nettoexport, Lehrerlohn = Einkommen."},

{id:"s05",topic:"dreiseiten",type:"tf",diff:2,tax:"K2",
 q:"Der Produktionsansatz und der Einkommensansatz m√ºssen immer denselben Wert ergeben.",
 correct:true,explain:"Richtig. Die drei Ans√§tze betrachten denselben Sachverhalt aus drei Perspektiven: Was produziert wird, fliesst als Einkommen zu und wird verwendet. Alle drei = gleiches BIP."},

{id:"s06",topic:"dreiseiten",type:"calc",diff:2,tax:"K3",
 q:"Berechnen Sie das BIP (Verwendungsansatz): Privater Konsum = 400 Mrd., Investitionen = 150 Mrd., Staatsausgaben = 100 Mrd., Exporte = 250 Mrd., Importe = 200 Mrd.",
 rows:[
   {label:"Nettoexporte (X ‚Äì M)",answer:50,tolerance:0,unit:"Mrd."},
   {label:"BIP (C + I + G + NX)",answer:700,tolerance:0,unit:"Mrd."}
 ],
 explain:"NX = 250‚Äì200 = 50 Mrd. BIP = 400+150+100+50 = 700 Mrd."},

{id:"s07",topic:"dreiseiten",type:"open",diff:2,tax:"K2",
 q:"Erkl√§ren Sie, warum die drei Berechnungsarten des BIP zum selben Ergebnis f√ºhren m√ºssen.",
 sample:"Jedes produzierte Gut wird konsumiert, investiert, vom Staat gekauft oder exportiert (Verwendung). Die Einnahmen fliessen als L√∂hne, Gewinne, Zinsen, Mieten an die Produktionsfaktoren (Einkommen). Die Wertsch√∂pfung bei der Herstellung entspricht dem Endproduktwert (Produktion). Es ist derselbe Geldfluss aus drei Blickwinkeln.",
 explain:"Der Kreislaufgedanke: Was produziert wird = was als Einkommen verteilt wird = was verwendet wird. Drei Perspektiven auf denselben √∂konomischen Vorgang."},
// ‚îÄ‚îÄ‚îÄ‚îÄ NOMINALES & REALES BIP (n01‚Äìn07) ‚îÄ‚îÄ‚îÄ‚îÄ
{id:"n01",topic:"nomreal",type:"mc",diff:1,tax:"K1",
 q:"Was unterscheidet das nominale vom realen BIP?",
 options:[{v:"A",t:"Nominal = aktuelle Preise, real = konstante Preise eines Basisjahres (inflationsbereinigt)."},{v:"B",t:"Das nominale BIP ber√ºcksichtigt die Inflation, das reale nicht."},{v:"C",t:"Das reale BIP wird nur f√ºr die Schweiz berechnet."},{v:"D",t:"Es gibt keinen Unterschied."}],
 correct:"A",explain:"Nominales BIP = Produktion zu aktuellen Marktpreisen (enth√§lt Preisver√§nderungen). Reales BIP = Produktion zu konstanten Preisen eines Basisjahres. Nur das reale BIP zeigt die tats√§chliche Mengenver√§nderung."},

{id:"n02",topic:"nomreal",type:"tf",diff:1,tax:"K2",
 q:"Wenn das nominale BIP steigt, bedeutet das immer, dass die Wirtschaft gewachsen ist.",
 correct:false,explain:"Falsch. Ein Anstieg des nominalen BIP kann nur auf Inflation zur√ºckzuf√ºhren sein. Nur ein Anstieg des realen BIP zeigt echtes Wirtschaftswachstum."},

{id:"n03",topic:"nomreal",type:"calc",diff:2,tax:"K3",
 q:"Nominales BIP 2023 = CHF 800 Mrd., Preisindex = 105 (Basis 2020 = 100). Berechnen Sie:",
 rows:[
   {label:"Reales BIP (zu Preisen von 2020)",answer:761.9,tolerance:0.5,unit:"Mrd. CHF"},
   {label:"Inflationsrate seit 2020",answer:5,tolerance:0,unit:"%"}
 ],
 explain:"Reales BIP = Nominales BIP / Preisindex √ó 100 = 800/105√ó100 = 761.9 Mrd. Inflation = 105‚Äì100 = 5%."},

{id:"n04",topic:"nomreal",type:"mc",diff:2,tax:"K2",
 q:"Warum verwendet man bei internationalen BIP-Vergleichen Kaufkraftparit√§ten (PPP)?",
 options:[{v:"A",t:"Weil Wechselkurse schwanken und man in verschiedenen L√§ndern f√ºr denselben Betrag unterschiedlich viel kaufen kann."},{v:"B",t:"Weil PPP einfacher zu berechnen sind."},{v:"C",t:"Weil das BIP in PPP immer h√∂her ist."},{v:"D",t:"Weil die UNO PPP vorschreibt."}],
 correct:"A",explain:"Wechselkurse spiegeln nicht die tats√§chliche Kaufkraft wider. Mit CHF 10 kauft man in der Schweiz weniger als mit dem Gegenwert in Thailand. PPP ber√ºcksichtigt die Preisniveauunterschiede."},

{id:"n05",topic:"nomreal",type:"fill",diff:1,tax:"K1",
 q:"F√ºr zeitliche Vergleiche verwendet man das {0} BIP, das die {1} herausrechnet. F√ºr internationale Vergleiche rechnet man in {2} um.",
 blanks:[
   {answer:"reale",alts:["reales"]},
   {answer:"Inflation",alts:["Teuerung","Preissteigerung"]},
   {answer:"Kaufkraftparit√§ten",alts:["PPP","Kaufkraftparit√§t","KKP"]}
 ],
 explain:"Reales BIP = inflationsbereinigt (zeitliche Vergleiche). Kaufkraftparit√§ten (PPP) = ber√ºcksichtigen Preisniveauunterschiede (internationale Vergleiche)."},

{id:"n06",topic:"nomreal",type:"tf",diff:2,tax:"K2",
 q:"Beim BIP-Vergleich mit Kaufkraftparit√§ten (PPP) rutscht die Schweiz in der Rangliste tendenziell nach unten.",
 correct:true,explain:"Richtig. Die Schweiz hat ein sehr hohes Preisniveau. Bei PPP-Bereinigung wird ber√ºcksichtigt, dass man in der Schweiz f√ºr denselben Betrag weniger kaufen kann. L√§nder mit tiefem Preisniveau (z.B. China) steigen entsprechend auf."},

{id:"n07",topic:"nomreal",type:"calc",diff:3,tax:"K3",
 q:"Land A: nominales BIP/Kopf = USD 60'000, PPP-Faktor = 0.85. Land B: BIP/Kopf = USD 25'000, PPP-Faktor = 1.6. Berechnen Sie das BIP/Kopf in PPP.",
 rows:[
   {label:"Land A: BIP/Kopf in PPP",answer:51000,tolerance:100,unit:"USD"},
   {label:"Land B: BIP/Kopf in PPP",answer:40000,tolerance:100,unit:"USD"}
 ],
 explain:"Land A: 60'000 √ó 0.85 = 51'000 USD (sinkt wegen hohem Preisniveau). Land B: 25'000 √ó 1.6 = 40'000 USD (steigt wegen tiefem Preisniveau). Unterschied schrumpft von 35'000 auf 11'000."},

// ‚îÄ‚îÄ‚îÄ‚îÄ WIRTSCHAFTSKREISLAUF (k01‚Äìk08) ‚îÄ‚îÄ‚îÄ‚îÄ
{id:"k01",topic:"kreislauf",type:"mc",diff:1,tax:"K1",
 q:"Welche zwei Akteure stehen im Zentrum des einfachen Wirtschaftskreislaufs?",
 options:[{v:"A",t:"Haushalte und Unternehmen"},{v:"B",t:"Staat und Ausland"},{v:"C",t:"Banken und Versicherungen"},{v:"D",t:"Arbeitnehmer und Arbeitgeber"}],
 correct:"A",explain:"Der einfache Wirtschaftskreislauf: Haushalte bieten Produktionsfaktoren an und fragen G√ºter nach. Unternehmen produzieren G√ºter und fragen Produktionsfaktoren nach."},

{id:"k02",topic:"kreislauf",type:"sort",diff:1,tax:"K2",
 q:"Ordnen Sie die Str√∂me im einfachen Wirtschaftskreislauf zu.",
 categories:["Haushalte \u2192 Unternehmen","Unternehmen \u2192 Haushalte"],
 items:[
   {t:"Arbeitskraft (Produktionsfaktor)",cat:0},{t:"Lohnzahlung",cat:1},
   {t:"Bezahlung f√ºr G√ºter",cat:0},{t:"G√ºter und Dienstleistungen",cat:1},
   {t:"Kapital (Produktionsfaktor)",cat:0},{t:"Zinszahlung",cat:1}
 ],
 explain:"Haushalte ‚Üí Unternehmen: Produktionsfaktoren (Arbeit, Kapital) + Geld f√ºr G√ºter. Unternehmen ‚Üí Haushalte: G√ºter + Faktorentgelte (L√∂hne, Zinsen)."},

{id:"k03",topic:"kreislauf",type:"mc",diff:2,tax:"K1",
 q:"Welche zus√§tzlichen Akteure kommen im erweiterten Wirtschaftskreislauf hinzu?",
 options:[{v:"A",t:"Staat, Ausland und Banken"},{v:"B",t:"Nur der Staat"},{v:"C",t:"Gewerkschaften und Verb√§nde"},{v:"D",t:"B√∂rse und Nationalbank"}],
 correct:"A",explain:"Erweiterter Kreislauf: + Staat (Steuern, G√ºter, Transfers), + Ausland (Exporte/Importe), + Banken (Ersparnisse, Kredite)."},

{id:"k04",topic:"kreislauf",type:"tf",diff:1,tax:"K1",
 q:"Im Wirtschaftskreislauf steht jedem Geldstrom ein G√ºterstrom (oder Faktorstrom) gegen√ºber.",
 correct:true,explain:"Richtig. Der Kreislauf besteht aus realen Str√∂men (G√ºter, Faktoren) und monet√§ren Str√∂men (Geld), die in entgegengesetzter Richtung fliessen."},

{id:"k05",topic:"kreislauf",type:"fill",diff:2,tax:"K1",
 q:"Im erweiterten Kreislauf finanziert sich der Staat √ºber {0}. Er verwendet diese f√ºr den Kauf von {1} und f√ºr {2} an die Haushalte.",
 blanks:[
   {answer:"Steuern",alts:["Steuereinnahmen"]},
   {answer:"G√ºtern",alts:["G√ºter","Waren und Dienstleistungen"]},
   {answer:"Transfers",alts:["Transferzahlungen","Sozialleistungen"]}
 ],
 explain:"Staat: Einnahmen = Steuern. Ausgaben = G√ºterk√§ufe + L√∂hne an Staatsangestellte + Transfers (z.B. AHV-Renten, Sozialhilfe ‚Äì Leistungen ohne direkte Gegenleistung)."},

{id:"k06",topic:"kreislauf",type:"open",diff:2,tax:"K3",
 q:"Frau Studer arbeitet als Verk√§uferin im Globus (CHF 2'800/Monat) und kauft dort eine Bluse f√ºr CHF 70. Beschreiben Sie G√ºter- und Geldkreislauf.",
 sample:"Faktormarkt: Frau Studer liefert Arbeitskraft an Globus (G√ºterstrom) \u2192 Globus zahlt CHF 2'800 Lohn (Geldstrom). G√ºtermarkt: Globus liefert Bluse (G√ºterstrom) \u2192 Frau Studer zahlt CHF 70 (Geldstrom). Es handelt sich um den einfachen Wirtschaftskreislauf mit zwei Tauschbeziehungen.",
 explain:"Dieses Beispiel illustriert den einfachen Wirtschaftskreislauf: Faktormarkt (Arbeit gegen Lohn) und G√ºtermarkt (Bluse gegen Geld). Geldstr√∂me laufen jeweils entgegengesetzt zu den G√ºterstr√∂men."},

{id:"k07",topic:"kreislauf",type:"mc",diff:2,tax:"K2",
 q:"Was versteht man unter einem Transfer im Wirtschaftskreislauf?",
 options:[{v:"A",t:"Eine staatliche Leistung ohne direkte Gegenleistung, z.B. AHV-Renten oder Sozialhilfe."},{v:"B",t:"Die √úberweisung von Geld ins Ausland."},{v:"C",t:"Den Export von G√ºtern."},{v:"D",t:"Eine Steuerzahlung an den Staat."}],
 correct:"A",explain:"Transfers = Zahlungen des Staates an Haushalte ohne Gegenleistung (anders als L√∂hne). Beispiele: AHV, IV, Sozialhilfe, Kinderzulagen, Stipendien."},

{id:"k08",topic:"kreislauf",type:"tf",diff:2,tax:"K2",
 q:"Im erweiterten Kreislauf fliessen Zahlungen f√ºr Importe von den Haushalten ans Ausland.",
 correct:true,explain:"Richtig. Schweizer Haushalte kaufen ausl√§ndische G√ºter (Importe) \u2192 Geld fliesst ans Ausland. Umgekehrt fliessen Exporteinnahmen vom Ausland an inl√§ndische Unternehmen."},
// ‚îÄ‚îÄ‚îÄ‚îÄ VERTEILUNG & UNGLEICHHEIT (v01‚Äìv09) ‚îÄ‚îÄ‚îÄ‚îÄ
{id:"v01",topic:"verteilung",type:"mc",diff:1,tax:"K1",
 q:"Was zeigt die Lorenzkurve?",
 options:[{v:"A",t:"Die Verteilung von Einkommen oder Verm√∂gen ‚Äì je weiter von der 45\u00b0-Linie, desto ungleicher."},{v:"B",t:"Das Wirtschaftswachstum √ºber die Zeit."},{v:"C",t:"Den Zusammenhang zwischen Inflation und Arbeitslosigkeit."},{v:"D",t:"Die Entwicklung des BIP pro Kopf."}],
 correct:"A",explain:"Die Lorenzkurve zeigt die kumulative Verteilung. Die 45\u00b0-Linie = perfekte Gleichverteilung. Je st√§rker die Kurve abweicht, desto ungleicher die Verteilung."},

{id:"v02",topic:"verteilung",type:"fill",diff:1,tax:"K1",
 q:"Der {0} misst die Ungleichheit. Er nimmt Werte zwischen {1} (Gleichverteilung) und {2} (maximale Ungleichheit) an.",
 blanks:[
   {answer:"Gini-Koeffizient",alts:["Gini Koeffizient","Ginikoeffizient","Gini"]},
   {answer:"0",alts:["null"]},
   {answer:"1",alts:["eins"]}
 ],
 explain:"Gini = Fl√§che zwischen 45\u00b0-Linie und Lorenzkurve / Gesamtdreiecksfl√§che. 0 = alle haben gleich viel, 1 = eine Person hat alles."},

{id:"v03",topic:"verteilung",type:"mc",diff:2,tax:"K2",
 q:"Der Gini-Koeffizient betr√§gt in der Schweiz ca. 0.29 und in den USA ca. 0.37. Was bedeutet das?",
 options:[{v:"A",t:"Die Einkommensungleichheit ist in den USA deutlich gr√∂sser als in der Schweiz."},{v:"B",t:"Die Schweiz ist reicher als die USA."},{v:"C",t:"Die USA haben ein h√∂heres BIP pro Kopf."},{v:"D",t:"In der Schweiz gibt es mehr Milliard√§re."}],
 correct:"A",explain:"H√∂herer Gini = gr√∂ssere Ungleichheit. Schweiz 0.29 (relativ gleichm√§ssig), USA 0.37 (deutlich ungleicher). Durch Umverteilung sinkt der Gini in der Schweiz von ca. 0.34 (Prim√§reinkommen) auf 0.29 (verf√ºgbares Einkommen)."},

{id:"v04",topic:"verteilung",type:"mc",diff:2,tax:"K2",
 q:"Was versteht Branko Milanovic unter \u00abguter\u00bb und \u00abschlechter\u00bb Ungleichheit?",
 options:[{v:"A",t:"Gute Ungleichheit schafft Leistungsanreize. Schlechte Ungleichheit zementiert Privilegien und verhindert Chancengleichheit."},{v:"B",t:"Gute Ungleichheit betrifft nur Verm√∂gen, schlechte nur Einkommen."},{v:"C",t:"Gute Ungleichheit gibt es nur in reichen L√§ndern."},{v:"D",t:"Jede Form von Ungleichheit ist schlecht."}],
 correct:"A",explain:"Nach Milanovic: \u00abGute\u00bb Ungleichheit ist leistungsbezogen (Anreize, Wachstum). \u00abSchlechte\u00bb entsteht durch Rent-Seeking (politischen Einfluss zum Machterhalt) oder fehlenden Bildungszugang f√ºr Arme."},

{id:"v05",topic:"verteilung",type:"tf",diff:2,tax:"K2",
 q:"Gem√§ss aktueller Forschung ist Fr√ºhf√∂rderung das effizienteste Mittel gegen Ungleichheit.",
 correct:true,explain:"Richtig. Nobelpreistr√§ger Heckman zeigt: ca. 50% der Einkommensunterschiede werden vor dem 18. Lebensjahr gepr√§gt. Fr√ºhf√∂rderung ist effektiver als sp√§tere Umverteilung, da sie an der Wurzel ansetzt."},

{id:"v06",topic:"verteilung",type:"sort",diff:2,tax:"K2",
 q:"Ordnen Sie zu: Umverteilung (Symptombek√§mpfung) oder Ursachenbek√§mpfung?",
 categories:["Umverteilung","Ursachenbek√§mpfung"],
 items:[
   {t:"Progressive Besteuerung",cat:0},{t:"Fr√ºhf√∂rderung f√ºr bildungsferne Familien",cat:1},
   {t:"Sozialhilfe und Transfers",cat:0},{t:"Kostenloser Zugang zu Bildung",cat:1},
   {t:"AHV-Renten",cat:0},{t:"Stipendien f√ºr talentierte Kinder",cat:1}
 ],
 explain:"Umverteilung (Steuern, Transfers) wirkt schnell, kann aber Anreize verringern. Ursachenbek√§mpfung (Bildung, Fr√ºhf√∂rderung) setzt bei den Wurzeln an und f√∂rdert gleichzeitig das Humankapital."},

{id:"v07",topic:"verteilung",type:"tf",diff:1,tax:"K1",
 q:"Die Verm√∂gensverteilung in der Schweiz ist deutlich ungleicher als die Einkommensverteilung.",
 correct:true,explain:"Richtig. Die Lorenzkurve f√ºr Verm√∂gen weicht viel st√§rker ab als f√ºr Einkommen. Im Kanton Bern z.B. besitzen ca. 209'000 Personen gar kein Verm√∂gen, w√§hrend 770 Personen rund 20% des Gesamtverm√∂gens besitzen."},

{id:"v08",topic:"verteilung",type:"open",diff:3,tax:"K5",
 q:"\u00abMehr Gleichheit bedeutet automatisch weniger Wirtschaftswachstum.\u00bb Nehmen Sie kritisch Stellung.",
 sample:"Zu vereinfacht. Moderate Ungleichheit kann wachstumsf√∂rdernd sein (Anreize), aber zu hohe Ungleichheit schadet: mangelnde Bildungschancen, soziale Instabilit√§t, Polarisierung. Entscheidend ist die Art: Leistungsbezogene Ungleichheit motiviert, privilegienbasierte hemmt. Kluge Politik (Fr√ºhf√∂rderung statt nur Umverteilung) kann Gleichheit und Wachstum gleichzeitig f√∂rdern.",
 explain:"Die Forschung zeigt: Die Beziehung ist nicht linear. Der Schl√ºssel liegt in der Unterscheidung zwischen \u00abguter\u00bb und \u00abschlechter\u00bb Ungleichheit (Milanovic)."},

{id:"v09",topic:"verteilung",type:"mc",diff:3,tax:"K4",
 q:"Warum kann sehr hohe Ungleichheit das Wirtschaftswachstum gef√§hrden?",
 options:[{v:"A",t:"Extreme Ungleichheit provoziert soziale Unruhen, verringert Vertrauen und hemmt Investitionen."},{v:"B",t:"Hohe Ungleichheit hat keinen Einfluss auf den sozialen Frieden."},{v:"C",t:"In ungleichen Gesellschaften investieren die Reichen mehr."},{v:"D",t:"Soziale Unruhen f√ºhren zu mehr Konsum."}],
 correct:"A",explain:"Bei sehr hoher Ungleichheit (Gini > ca. 0.4) steigt das Risiko sozialer Instabilit√§t. Menschen werden kriminell statt produktiv. Die Unsicherheit hemmt Investitionen. Zudem entstehen Forderungen nach starker Umverteilung."},

// ‚îÄ‚îÄ‚îÄ‚îÄ WACHSTUM & NACHHALTIGKEIT (w01‚Äìw09) ‚îÄ‚îÄ‚îÄ‚îÄ
{id:"w01",topic:"wachstum",type:"mc",diff:1,tax:"K1",
 q:"Auf welche zwei Arten kann eine Volkswirtschaft wachsen?",
 options:[{v:"A",t:"Durch mehr Arbeitsstunden oder durch h√∂here Produktivit√§t."},{v:"B",t:"Durch mehr Exporte oder weniger Importe."},{v:"C",t:"Durch mehr Konsum oder mehr Sparen."},{v:"D",t:"Durch h√∂here Preise oder mehr Steuern."}],
 correct:"A",explain:"BIP-Wachstum durch: (1) Mehr Arbeitsstunden (mehr Erwerbst√§tige, Zuwanderung) oder (2) H√∂here Arbeitsproduktivit√§t (mehr Kapital, bessere Technologie, Humankapital). F√ºr den Wohlstand pro Kopf ist v.a. die Produktivit√§t entscheidend."},

{id:"w02",topic:"wachstum",type:"fill",diff:1,tax:"K1",
 q:"Nachhaltige Entwicklung befriedigt die Bed√ºrfnisse der {0}, ohne zu riskieren, dass {1} Generationen ihre Bed√ºrfnisse nicht befriedigen k√∂nnen. Diese Definition stammt aus dem {2}-Bericht von 1987.",
 blanks:[
   {answer:"Gegenwart",alts:["heutigen Generation"]},
   {answer:"k√ºnftige",alts:["zuk√ºnftige","kommende","nachfolgende"]},
   {answer:"Brundtland",alts:[]}
 ],
 explain:"Die Brundtland-Definition (1987) betont intergenerationelle Gerechtigkeit: Heutige Bed√ºrfnisbefriedigung darf nicht auf Kosten zuk√ºnftiger Generationen gehen."},

{id:"w03",topic:"wachstum",type:"mc",diff:2,tax:"K2",
 q:"Was sind externe Effekte (Externalit√§ten)?",
 options:[{v:"A",t:"Kosten oder Nutzen, die bei Produktion/Konsum entstehen, aber nicht vom Verursacher getragen werden."},{v:"B",t:"Auswirkungen von Exporten auf das BIP."},{v:"C",t:"Kosten, die im Ausland anfallen."},{v:"D",t:"Gewinne f√ºr ausl√§ndische Investoren."}],
 correct:"A",explain:"Externe Effekte = Kosten/Nutzen f√ºr Dritte, die nicht im Preis ber√ºcksichtigt werden. Negativ: Fabrik verschmutzt Fluss (Allgemeinheit tr√§gt Kosten). Positiv: Impfung sch√ºtzt andere. Bei negativen Externalit√§ten wird \u00abzu viel\u00bb produziert \u2192 Marktversagen."},

{id:"w04",topic:"wachstum",type:"sort",diff:2,tax:"K2",
 q:"Ordnen Sie die Instrumente der Umweltpolitik den Kategorien zu.",
 categories:["Gebote und Verbote","Lenkungsabgaben","Umweltzertifikate"],
 items:[
   {t:"CO\u2082-Abgabe auf Brennstoffe",cat:1},{t:"Schadstoff-Grenzwerte",cat:0},
   {t:"Handel mit Emissionsrechten",cat:2},{t:"Verbot von FCKW",cat:0},
   {t:"Klimarappen auf Benzin",cat:1},{t:"EU-Emissionshandelssystem (ETS)",cat:2}
 ],
 explain:"(1) Gebote/Verbote: direkte Regeln. (2) Lenkungsabgaben: Preisanreize, Einnahmen r√ºckverteilt. (3) Umweltzertifikate: Staat legt Gesamtmenge fest, Handel bestimmt Preis. Marktbasiert und kosteneffizient."},

{id:"w05",topic:"wachstum",type:"tf",diff:2,tax:"K2",
 q:"Lenkungsabgaben sollen dem Staat prim√§r h√∂here Einnahmen verschaffen.",
 correct:false,explain:"Falsch. Lenkungsabgaben zielen auf Verhaltens√§nderung, nicht auf Einnahmen. Die Einnahmen werden vollumf√§nglich an die Bev√∂lkerung r√ºckverteilt. Wer umweltfreundlich handelt, erh√§lt mehr zur√ºck als er einzahlt."},

{id:"w06",topic:"wachstum",type:"mc",diff:3,tax:"K3",
 q:"Was besagt das Coase-Theorem?",
 options:[{v:"A",t:"Bei klar definierten Eigentumsrechten und geringen Transaktionskosten k√∂nnen Betroffene externe Effekte durch Verhandlungen l√∂sen."},{v:"B",t:"Der Staat muss immer eingreifen bei externen Effekten."},{v:"C",t:"Umweltverschmutzung kann nicht durch den Markt gel√∂st werden."},{v:"D",t:"Externe Effekte existieren nur bei Monopolen."}],
 correct:"A",explain:"Das Coase-Theorem: Wenn Eigentums- und Klagerechte klar definiert sind und die Transaktionskosten gering, k√∂nnen die Betroffenen das Problem durch freiwillige Verhandlungen l√∂sen \u2013 ohne Staatseingriff."},

{id:"w07",topic:"wachstum",type:"tf",diff:1,tax:"K1",
 q:"Wirtschaftswachstum und Nachhaltigkeit schliessen sich gegenseitig aus.",
 correct:false,explain:"Falsch. Qualitatives Wachstum (bessere Technologie, Effizienz, Dienstleistungen) kann mit Nachhaltigkeit vereinbar sein. Es geht nicht darum, kein Wachstum zu haben, sondern die Art des Wachstums zu ver√§ndern \u2013 weg von ressourcenintensiver Produktion hin zu nachhaltigerem Wirtschaften."},

{id:"w08",topic:"wachstum",type:"open",diff:3,tax:"K5",
 q:"Ein Zementwerk verursacht erhebliche CO\u2082-Emissionen. Vergleichen Sie zwei Instrumente (z.B. Lenkungsabgabe vs. Emissionshandel), mit denen der Staat dieses Problem angehen kann.",
 sample:"Lenkungsabgabe: Der Staat legt eine CO\u2082-Abgabe pro Tonne fest. Vorteil: Planungssicherheit beim Preis, einfache Umsetzung. Nachteil: Die tats√§chliche Reduktionsmenge ist unsicher. Emissionshandel: Der Staat legt eine Obergrenze (Cap) fest und verteilt Zertifikate. Vorteil: Die Gesamtmenge ist fix, der Markt findet den g√ºnstigsten Weg zur Reduktion (Kosteneffizienz). Nachteil: Preisschwankungen, komplexe Administration. Beide internalisieren externe Kosten, aber auf unterschiedlichem Weg: Preis vs. Menge.",
 explain:"Lenkungsabgabe = Preisl√∂sung (Preis fix, Menge variabel). Emissionshandel = Mengenl√∂sung (Menge fix, Preis variabel). Beide Instrumente internalisieren externe Kosten und sind theoretisch gleich effizient."},

{id:"w09",topic:"wachstum",type:"sort",diff:2,tax:"K2",
 q:"Ordnen Sie die Beispiele zu: Handelt es sich um einen negativen oder positiven externen Effekt?",
 categories:["Negativer externer Effekt","Positiver externer Effekt"],
 items:[
   {t:"Fabrik verschmutzt einen Fluss",cat:0},{t:"Imker-Bienen best√§uben Nachbars Obstb√§ume",cat:1},
   {t:"Flugl√§rm bel√§stigt Anwohner",cat:0},{t:"Impfung sch√ºtzt auch Ungeimpfte",cat:1},
   {t:"Abgase im Stadtverkehr",cat:0},{t:"Forschung n√ºtzt der ganzen Gesellschaft",cat:1}
 ],
 explain:"Negative Externalit√§ten: Kosten f√ºr Dritte (Verschmutzung, L√§rm, Abgase) \u2192 zu viel Produktion. Positive Externalit√§ten: Nutzen f√ºr Dritte (Best√§ubung, Impfschutz, Forschung) \u2192 zu wenig Produktion. Beides = Marktversagen."}
];
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// STATE
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let state={mode:null,filters:{topics:new Set(),diffs:new Set(),types:new Set()},queue:[],current:0,score:0,maxScore:0,answered:[],wrong:[]};
let pickedSortItem=null;

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// INIT
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function init(){
  buildChips('topicChips',TOPICS,'topics',t=>TOPICS[t].short);
  buildChips('diffChips',DIFF_LABELS,'diffs',d=>DIFF_LABELS[d]);
  buildChips('typeChips',TYPE_LABELS,'types',t=>TYPE_LABELS[t]);
  updateFilterCount();
}

function buildChips(containerId,obj,filterKey,labelFn){
  const c=document.getElementById(containerId);
  c.innerHTML='';
  Object.keys(obj).forEach(k=>{
    const ch=document.createElement('span');
    ch.className='chip';
    ch.textContent=labelFn(k);
    ch.dataset.key=k;
    ch.onclick=()=>toggleChip(ch,filterKey,k);
    c.appendChild(ch);
  });
}

function setMode(m){
  state.mode=m;
  document.querySelectorAll('.mode-card').forEach(c=>c.classList.toggle('active',c.dataset.mode===m));
  if(m==='mix'){
    ['topicChips','diffChips','typeChips'].forEach(id=>{
      document.querySelectorAll('#'+id+' .chip').forEach(ch=>{
        ch.classList.add('active');
        state.filters[id==='topicChips'?'topics':id==='diffChips'?'diffs':'types'].add(ch.dataset.key);
      });
    });
  } else {
    ['topicChips','diffChips'].forEach(id=>{
      document.querySelectorAll('#'+id+' .chip').forEach(ch=>ch.classList.remove('active'));
      state.filters[id==='topicChips'?'topics':'diffs'].clear();
    });
    document.querySelectorAll('#typeChips .chip').forEach(ch=>{
      ch.classList.add('active');
      state.filters.types.add(ch.dataset.key);
    });
  }
  updateFilterCount();
}

function toggleChip(el,filterKey,key){
  el.classList.toggle('active');
  if(el.classList.contains('active'))state.filters[filterKey].add(key);
  else state.filters[filterKey].delete(key);
  updateFilterCount();
}

function getFiltered(){
  return QUESTIONS.filter(q=>
    (state.filters.topics.size===0||state.filters.topics.has(q.topic))&&
    (state.filters.diffs.size===0||state.filters.diffs.has(String(q.diff)))&&
    (state.filters.types.size===0||state.filters.types.has(q.type))
  );
}

function updateFilterCount(){
  const n=getFiltered().length;
  document.getElementById('filterCount').textContent=n+' Aufgabe'+(n!==1?'n':'')+' verf√ºgbar';
  document.getElementById('startBtn').disabled=n===0||!state.mode;
}

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// QUIZ
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
function startQuiz(){
  let q=getFiltered();
  if(state.mode==='focus')q.sort((a,b)=>a.diff-b.diff);
  else shuffle(q);
  state.queue=q;state.current=0;state.score=0;state.maxScore=0;state.answered=[];state.wrong=[];
  showScreen('quizScreen');
  renderQuestion();
}

function renderQuestion(){
  const q=state.queue[state.current];
  const total=state.queue.length;
  document.getElementById('qProgress').textContent=(state.current+1)+' / '+total;
  document.getElementById('qScore').textContent=state.score+' Punkte';
  document.getElementById('progressBar').style.width=((state.current)/total*100)+'%';
  document.getElementById('nextBtn').style.display='none';

  let html='<div class="q-badges">';
  html+='<span class="badge badge-topic">'+TOPICS[q.topic].short+'</span>';
  html+='<span class="badge badge-diff'+q.diff+'">'+DIFF_LABELS[q.diff]+'</span>';
  html+='<span class="badge badge-tax">'+q.tax+'</span>';
  html+='<span class="badge badge-type">'+TYPE_LABELS[q.type]+'</span>';
  html+='</div>';
  html+='<div class="q-text">'+q.q+'</div>';

  if(q.type==='mc'){
    html+='<div class="mc-options">';
    q.options.forEach(o=>{
      html+='<div class="mc-opt" data-val="'+o.v+'" onclick="answerMC(this,\''+q.id+'\',\''+o.v+'\')">';
      html+='<span class="opt-letter">'+o.v+'</span><span class="opt-text">'+o.t+'</span></div>';
    });
    html+='</div>';
  } else if(q.type==='tf'){
    html+='<div class="tf-btns"><div class="tf-btn" onclick="answerTF(this,\''+q.id+'\',true)">\u2705 Richtig</div>';
    html+='<div class="tf-btn" onclick="answerTF(this,\''+q.id+'\',false)">\u274c Falsch</div></div>';
  } else if(q.type==='fill'){
    let parts=q.q.split(/\{(\d+)\}/g);
    html='<div class="q-badges">';
    html+='<span class="badge badge-topic">'+TOPICS[q.topic].short+'</span>';
    html+='<span class="badge badge-diff'+q.diff+'">'+DIFF_LABELS[q.diff]+'</span>';
    html+='<span class="badge badge-tax">'+q.tax+'</span>';
    html+='<span class="badge badge-type">'+TYPE_LABELS[q.type]+'</span>';
    html+='</div>';
    html+='<div class="q-text">';
    let bIdx=0;
    for(let i=0;i<parts.length;i++){
      if(i%2===0)html+=parts[i];
      else html+='<input class="fill-input" data-bidx="'+bIdx+'" placeholder="\u2026" autocomplete="off" autocapitalize="off">';
      if(i%2===1)bIdx++;
    }
    html+='</div><button class="btn btn-primary" style="margin-top:14px" onclick="answerFill(\''+q.id+'\')">\u00dcberpr\u00fcfen</button>';
  } else if(q.type==='calc'){
    html+='<div class="calc-rows">';
    q.rows.forEach((r,i)=>{
      html+='<div class="calc-row"><label>'+r.label+'</label><input type="number" step="any" data-ridx="'+i+'" placeholder="?"><span class="unit">'+r.unit+'</span></div>';
    });
    html+='</div><button class="btn btn-primary" style="margin-top:14px" onclick="answerCalc(\''+q.id+'\')">\u00dcberpr\u00fcfen</button>';
  } else if(q.type==='sort'){
    html+='<div class="sort-pool" id="sortPool">';
    let items=[...q.items];shuffle(items);
    items.forEach((it,i)=>{
      html+='<span class="sort-item" data-oidx="'+q.items.indexOf(it)+'" onclick="pickSortItem(this)">'+it.t+'</span>';
    });
    html+='</div><div class="sort-cats" id="sortCats" style="grid-template-columns:repeat('+q.categories.length+',1fr)">';
    q.categories.forEach((cat,ci)=>{
      html+='<div class="sort-cat" data-cidx="'+ci+'" onclick="placeSortItem(this,'+ci+')"><div class="sort-cat-title">'+cat+'</div><div class="sort-cat-items" id="sortCat'+ci+'"></div></div>';
    });
    html+='</div><button class="btn btn-primary" style="margin-top:14px" onclick="answerSort(\''+q.id+'\')">\u00dcberpr\u00fcfen</button>';
  } else if(q.type==='open'){
    html+='<textarea class="open-answer" id="openAnswer" placeholder="Schreiben Sie Ihre Antwort hier\u2026"></textarea>';
    html+='<button class="btn btn-primary" style="margin-top:14px" onclick="showOpenSample(\''+q.id+'\')">L\u00f6sung anzeigen</button>';
    html+='<div class="open-sample" id="openSample"><div class="open-sample-title">L\u00f6sungsvorschlag:</div><div id="openSampleText"></div></div>';
    html+='<div class="open-self" id="openSelf">';
    html+='<button class="btn btn-primary" onclick="answerOpen(\''+q.id+'\',true)">\u2705 Gewusst</button>';
    html+='<button class="btn btn-outline" onclick="answerOpen(\''+q.id+'\',false)">\u274c Nicht gewusst</button>';
    html+='</div>';
  }
  html+='<div class="feedback" id="feedback"></div>';
  document.getElementById('questionCard').innerHTML=html;
  pickedSortItem=null;
}

// ‚îÄ‚îÄ Answer handlers ‚îÄ‚îÄ
function answerMC(el,qid,val){
  if(document.querySelector('.mc-opt.correct,.mc-opt.wrong'))return;
  const q=QUESTIONS.find(x=>x.id===qid);
  document.querySelectorAll('.mc-opt').forEach(o=>{
    o.style.pointerEvents='none';
    if(o.dataset.val===q.correct)o.classList.add('correct');
    else if(o.dataset.val===val)o.classList.add('wrong');
  });
  finishAnswer(q,val===q.correct,q.explain);
}

function answerTF(el,qid,val){
  if(document.querySelector('.tf-btn.correct,.tf-btn.wrong'))return;
  const q=QUESTIONS.find(x=>x.id===qid);
  const correct=val===q.correct;
  document.querySelectorAll('.tf-btn').forEach(b=>b.style.pointerEvents='none');
  el.classList.add(correct?'correct':'wrong');
  if(!correct)document.querySelectorAll('.tf-btn').forEach(b=>{if(b!==el)b.classList.add('correct')});
  finishAnswer(q,correct,q.explain);
}

function answerFill(qid){
  const q=QUESTIONS.find(x=>x.id===qid);
  const inputs=document.querySelectorAll('.fill-input');
  let allCorrect=true;
  inputs.forEach(inp=>{
    const bi=parseInt(inp.dataset.bidx);
    const blank=q.blanks[bi];
    const userVal=inp.value.trim().toLowerCase();
    const ok=userVal===blank.answer.toLowerCase()||blank.alts.some(a=>userVal===a.toLowerCase());
    inp.classList.add(ok?'correct':'wrong');
    inp.disabled=true;
    if(!ok){allCorrect=false;inp.value=inp.value+' \u2192 '+blank.answer}
  });
  finishAnswer(q,allCorrect,q.explain);
}

function answerCalc(qid){
  const q=QUESTIONS.find(x=>x.id===qid);
  const inputs=document.querySelectorAll('.calc-row input');
  let allCorrect=true;
  inputs.forEach(inp=>{
    const ri=parseInt(inp.dataset.ridx);
    const row=q.rows[ri];
    const val=parseFloat(inp.value);
    const ok=!isNaN(val)&&Math.abs(val-row.answer)<=row.tolerance;
    inp.classList.add(ok?'correct':'wrong');
    inp.disabled=true;
    if(!ok){allCorrect=false;inp.value=inp.value+' \u2192 '+row.answer}
  });
  finishAnswer(q,allCorrect,q.explain);
}

function pickSortItem(el){
  if(el.classList.contains('placed'))return;
  document.querySelectorAll('.sort-item').forEach(s=>s.classList.remove('picked'));
  el.classList.add('picked');
  pickedSortItem=el;
}

function placeSortItem(catEl,cidx){
  if(!pickedSortItem)return;
  const container=catEl.querySelector('.sort-cat-items');
  const clone=document.createElement('span');
  clone.className='sort-cat-item';
  clone.textContent=pickedSortItem.textContent;
  clone.dataset.oidx=pickedSortItem.dataset.oidx;
  clone.onclick=function(){this.remove();
    const orig=document.querySelector('.sort-item[data-oidx="'+this.dataset.oidx+'"]');
    if(orig){orig.style.display='';orig.classList.remove('placed')}
  };
  container.appendChild(clone);
  pickedSortItem.style.display='none';
  pickedSortItem.classList.add('placed');
  pickedSortItem.classList.remove('picked');
  pickedSortItem=null;
}

function answerSort(qid){
  const q=QUESTIONS.find(x=>x.id===qid);
  let allCorrect=true;
  document.querySelectorAll('.sort-cat').forEach(catEl=>{
    const cidx=parseInt(catEl.dataset.cidx);
    catEl.querySelectorAll('.sort-cat-item').forEach(item=>{
      const oidx=parseInt(item.dataset.oidx);
      const ok=q.items[oidx].cat===cidx;
      item.classList.add(ok?'correct-item':'wrong-item');
      if(!ok)allCorrect=false;
    });
  });
  document.querySelectorAll('.sort-item').forEach(s=>s.style.pointerEvents='none');
  document.querySelectorAll('.sort-cat').forEach(c=>c.style.pointerEvents='none');
  document.querySelectorAll('#questionCard .btn-primary').forEach(b=>b.style.display='none');
  finishAnswer(q,allCorrect,q.explain);
}

function showOpenSample(qid){
  const q=QUESTIONS.find(x=>x.id===qid);
  document.getElementById('openSampleText').textContent=q.sample;
  document.getElementById('openSample').classList.add('show');
  document.getElementById('openSelf').classList.add('show');
  document.querySelectorAll('#questionCard .btn-primary').forEach(b=>{if(b.textContent.includes('L\u00f6sung'))b.style.display='none'});
}

function answerOpen(qid,correct){
  const q=QUESTIONS.find(x=>x.id===qid);
  document.getElementById('openSelf').style.display='none';
  document.getElementById('openAnswer').disabled=true;
  finishAnswer(q,correct,q.explain);
}

function finishAnswer(q,correct,explain){
  state.maxScore++;
  if(correct)state.score++;
  else state.wrong.push({q:q.q,explain:q.explain,topic:q.topic});
  state.answered.push({id:q.id,correct});
  document.getElementById('qScore').textContent=state.score+' Punkte';
  const fb=document.getElementById('feedback');
  fb.className='feedback show '+(correct?'correct':'wrong');
  fb.innerHTML='<div class="feedback-title">'+(correct?'\u2705 Richtig!':'\u274c Leider falsch')+'</div><div>'+explain+'</div>';
  document.getElementById('nextBtn').style.display='inline-flex';
}

function nextQuestion(){
  state.current++;
  if(state.current>=state.queue.length)return endQuiz();
  renderQuestion();
}

function endQuiz(){
  document.getElementById('progressBar').style.width='100%';
  showScreen('resultScreen');
  const pct=state.maxScore?Math.round(state.score/state.maxScore*100):0;
  document.getElementById('resPts').textContent=state.score+' / '+state.maxScore;
  document.getElementById('resPct').textContent=pct+'%';
  let topicData={};
  state.queue.forEach((q,i)=>{
    if(i>=state.answered.length)return;
    if(!topicData[q.topic])topicData[q.topic]={correct:0,total:0};
    topicData[q.topic].total++;
    if(state.answered[i].correct)topicData[q.topic].correct++;
  });
  let tHtml='';
  Object.keys(topicData).forEach(t=>{
    const d=topicData[t];const p=Math.round(d.correct/d.total*100);
    const cls=p>=70?'tg':p>=40?'ty':'tr';
    tHtml+='<div class="topic-row"><span class="topic-name">'+TOPICS[t].label+'</span>';
    tHtml+='<span class="topic-score">'+d.correct+'/'+d.total+'</span>';
    tHtml+='<div class="topic-bar"><div class="topic-bar-fill '+cls+'" style="width:'+p+'%"></div></div></div>';
  });
  document.getElementById('topicResults').innerHTML=tHtml;
  if(state.wrong.length){
    document.getElementById('wrongCard').style.display='';
    let wHtml='';
    state.wrong.forEach(w=>{
      wHtml+='<div class="wrong-item"><div class="wq">'+w.q+'</div><div class="wa">'+w.explain+'</div></div>';
    });
    document.getElementById('wrongList').innerHTML=wHtml;
  }else{document.getElementById('wrongCard').style.display='none'}
}

function exportResults(){window.print()}

function resetApp(){
  state={mode:null,filters:{topics:new Set(),diffs:new Set(),types:new Set()},queue:[],current:0,score:0,maxScore:0,answered:[],wrong:[]};
  document.querySelectorAll('.chip').forEach(c=>c.classList.remove('active'));
  document.querySelectorAll('.mode-card').forEach(c=>c.classList.remove('active'));
  updateFilterCount();
  showScreen('startScreen');
}

function showScreen(id){
  document.querySelectorAll('.screen').forEach(s=>s.classList.remove('active'));
  document.getElementById(id).classList.add('active');
  window.scrollTo({top:0});
}

function shuffle(arr){for(let i=arr.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[arr[i],arr[j]]=[arr[j],arr[i]]}return arr}

init();

</script>
</body>
</html>
